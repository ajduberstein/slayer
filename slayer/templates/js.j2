{{ viewport }};

var layers = [
  {{ layers }}
];

var deckgl = new deck.DeckGL({
  container: 'container',
  mapboxApiAccessToken: '{{ mapbox_api_key }}',
  viewState: INITIAL_VIEWPORT_STATE,
  controller: deck.MapController,
  onViewportChange: onViewportChange,
  layers: layers
});

{% if add_timer %}
  {% include 'timer.j2' %}
{% endif %}


function onViewportChange(viewport) {
  deckgl.setProps({viewState: viewport});
}
